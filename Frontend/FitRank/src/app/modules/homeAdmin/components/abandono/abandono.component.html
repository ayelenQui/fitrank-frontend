<div class="container-fluid py-3" style="background-color: #fff; ">
  <h1 id="typingText" class="text-titulo text-center fw-bold mb-4"> RETENCION DE SOCIOS </h1><br />

  <div class="row g-4 mb-4">

    <div class="logros-admin-wrapper">

      <h2 class="titulo-seccion">Últimas asistencias</h2>

      <div class="contenedor-tabla">


        <div class="encabezado-tabla">
          <div>
            <h2>Asistencias recientes</h2>
            <span>Mostrando las últimas 6 asistencias</span>
          </div>

          <span class="badge-activos">
            {{ asistenciasFiltradas.length }} registros
          </span>
        </div>

        <table class="tabla-logros">
          <thead>
            <tr>
              <th>Socio</th>
              <th>Gimnasio</th>
              <th>Fecha</th>
              <th>Entrada</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let asistencia of asistenciasFiltradas | slice:0:6">
              <td>{{ asistencia.nombreSocio }}</td>
              <td>{{ asistencia.gimnasioNombre }}</td>
              <td>{{ asistencia.fecha | date:'dd/MM/yyyy' }}</td>

              <td>
                {{ asistencia.horaEntrada | date:'HH:mm' }}

                <svg xmlns="http://www.w3.org/2000/svg"
                     width="16" height="16" fill="currentColor"
                     class="bi bi-stopwatch ms-1"
                     viewBox="0 0 16 16">
                  <path d="M8.5 5.6a.5.5 0 1 0-1 0v2.9h-3a.5.5 0 0 0 0 1H8a.5.5 0 0 0 .5-.5z" />
                  <path d="M6.5 1A.5.5 0 0 1 7 .5h2a.5.5 0 0 1 0 1v.57c1.36.196 2.594.78 3.584 1.64l.012-.013.354-.354-.354-.353a.5.5 0 0 1 .707-.708l1.414 1.415a.5.5 0 1 1-.707.707l-.353-.354-.354.354-.013.012A7 7 0 1 1 7 2.071V1.5a.5.5 0 0 1-.5-.5M8 3a6 6 0 1 0 .001 12A6 6 0 0 0 8 3" />
                </svg>
              </td>
            </tr>
          </tbody>
        </table>

        <div class="col-lg-5 col-md-5 logros-admin-wrapper mx-auto">
          <div *ngIf="!loading && inactivos.length > 0" class="encabezado-tabla card p-3 rounded-4 shadow-sm h-100">
            <h2 class="fw-bold text-fitrank mb-3">
              Socios en riesgo de abandono
            </h2>
            <div class="socios-riesgo-list overflow-auto" style="max-height: 350px;">
              <div *ngFor="let socio of inactivos | slice:0:5" class="card text-dark shadow-sm rounded-4 p-3 mb-3">
                <h6 class="fw-bold text-fitrank mb-1">
                  {{ socio.nombre }} {{ socio.apellido }}
                </h6>
                <p class="mb-1"><strong>Email:</strong> {{ socio.email }}</p>
                <p class="mb-1"><strong>Teléfono:</strong> {{ socio.telefono || 'No registrado' }}</p>
                <p class="mb-1"><strong>Días sin asistir:</strong> {{ socio.diasSinAsistir }}</p>

                <div class="mt-3 d-flex gap-2">
                  <button class="btn btn-volver text-black flex-grow-1 btn-secondary" (click)="retenerSocio(socio.id)">Retener socio</button>
                  <button *ngIf="socio.telefono" class="btn-whatsapp-float btn btn-success flex-grow-1 btn-secondary" (click)="abrirWhatsApp(socio.telefono, socio.nombre)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16">
                      <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232" />
                    </svg> WhatsApp
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div *ngIf="!loading && asistenciasFiltradas.length === 0" class="text-center text-muted mt-3">
      <p>No hay asistencias registradas aún.</p>
    </div>


    <div>
    </div>
  </div>
</div>



