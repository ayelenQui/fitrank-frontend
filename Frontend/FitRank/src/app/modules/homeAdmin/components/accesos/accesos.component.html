<div class="scanner-container d-flex flex-column align-items-center justify-content-center py-4">
  <!-- ğŸ“· TÃ­tulo -->
  <h2 id="typingText" class="fw-bold text-fitrank mb-3">Control de Acceso QR</h2>
  <p class="text-black mb-4 text-center">
    EscaneÃ¡ el cÃ³digo QR del socio para validar su ingreso.
  </p>

  <!-- ğŸ“· EscÃ¡ner -->
  <div class=" scanner-frame p-2 rounded-4 shadow-lg  position-relative">
    <ngx-scanner-qrcode #scanner
                        (event)="onScan($event)"
                        class="rounded-4 overflow-hidden"
                        style="width: 300px; height: 300px;">
    </ngx-scanner-qrcode>
  </div>

  <!-- ğŸ›ï¸ Botones -->
  <div class="mt-4 d-flex gap-3">
    <button class="btn btn-fitrank" (click)="startScanner()"> Iniciar</button>
    <button class="btn btn-outline-danger" (click)="stopScanner()">Detener</button>
  </div>

  <!-- â³ Estado -->
  <div *ngIf="loading" class="mt-4 text-center">
    <div class="spinner-border text-fitrank" role="status"></div>
    <p class="mt-2 text-light">Validando QR...</p>
  </div>

  <!-- âœ… Resultado -->
  <div *ngIf="!loading && mensaje" class="mt-4 w-100 text-center">
    <div [ngClass]="exito ? 'alert alert-success mx-auto w-75' : 'alert alert-danger mx-auto w-75'"
         class="px-4 py-2 rounded-3 fw-bold">
      {{ mensaje }}
    </div>
  </div>

  <!-- ğŸ”¹ Detalle del socio -->
  <div *ngIf="exito && socio" class="card  text-dark mt-3 p-3 shadow-lg rounded-4 mx-auto" style="max-width: 420px;">
    <!-- âœ… Resultado  <img [src]="socio.fotoUrl || 'assets/img/default-user.png'"
                          class="rounded-circle mx-auto mb-3"
                          width="120" height="120" alt="Foto socio">-->

    <h4 class="text-fitrank fw-bold">{{ socio.nombre }} {{ socio.apellido }}</h4>
    <p><strong>Nivel:</strong> {{ socio.nivel }}</p>
    <p><strong>Apellido:</strong> {{ socio.apellido }}</p>
    <p><strong>Sexo:</strong> {{ socio.sexo }}</p>
    <p><strong>Cuota paga hasta:</strong> {{ socio.cuotaPagadaHasta | date:'dd/MM/yyyy' }}</p>
    <p><strong>Gimnasio:</strong> {{ socio.gimnasioNombre }}</p>

    <div class="mt-3">
      <h5 class="text-fitrank mb-2"> Ãšltimas asistencias</h5>
      <ul class="list-group bg-dark">
        <li *ngFor="let a of asistencias" class="list-group-item bg-dark text-light border-secondary">
          {{ a.gimnasioNombre }} â€” {{ a.fecha | date:'dd/MM/yyyy' }}
          <span class="text-muted">({{ a.horaEntrada | date:'HH:mm' }})</span>
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="ocupacion-wrapper">

  <!-- ğŸ”µ OCUPACIÃ“N EN VIVO -->
  <div class="ocupacion-card">
    <h2>ğŸ‹ï¸ OcupaciÃ³n Actual</h2>
    <div class="contador">{{ personasDentro }}</div>
    <p class="sub">personas dentro del gimnasio</p>
  </div>

  <!-- ğŸŸ£ LISTA DE MOVIMIENTOS EN TIEMPO REAL -->
  <div class="movimientos-card">
    <h3>ğŸ“‹ Movimientos Recientes</h3>

    <div class="movimiento" *ngFor="let m of ocupacion">
      <img [src]="m.foto || 'assets/img/perfil/user-sin-foto.png'" class="avatar">

      <div class="info">
        <div class="nombre">{{ m.nombre }}</div>
        <div class="fecha">{{ m.fecha | date:'dd/MM HH:mm' }}</div>
      </div>

      <div class="tipo" [ngClass]="m.tipo">
        {{ m.tipo === 'entrada' ? 'EntrÃ³' : 'SaliÃ³' }}
      </div>
    </div>

  </div>

</div>
