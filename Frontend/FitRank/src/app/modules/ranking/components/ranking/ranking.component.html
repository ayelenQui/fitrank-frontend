<!-- Agregar el header component -->
<app-sidebar-socio></app-sidebar-socio>
<app-header-socio></app-header-socio>
<!-- Agregar el SidebarSocioComponent -->

<div class="ranking-container" *ngIf="!cargando; else loading">
  <h2 class="titulo">
   Ranking Del Gimnasio
  </h2>
  
<div class="filtros">
  <!-- FILTROS PRINCIPALES -->
  <div class="filtros-superior">
    <!-- Cantidad y Grupo muscular -->
    <div class="filtros-grupo">
      <div class="sub-filtro">  
        <label for="cantidad">Cantidad:</label>
        <input type="number" id="cantidad" [(ngModel)]="cantidad" name="cantidad" (change)="cargarRanking()" min="1" />
      </div>

      <div class="sub-filtro">
        <label for="grupo">Grupo muscular:</label>
        <select [(ngModel)]="grupoSeleccionado" name="grupo" (change)="filtrar()">
          <option value="0">Todos</option>
          <option *ngFor="let g of grupos" [value]="g.id">{{ g.nombre }}</option>
        </select>
      </div>
    </div>

    <!-- Filtro por fechas -->
    <div class="filtros-fecha">
      <div class="sub-filtro">
        <label for="desde">Desde:</label>
        <input type="date" [(ngModel)]="desde" name="desde">
      </div>
      <div class="sub-filtro">
        <label for="hasta">Hasta:</label>
        <input type="date" [(ngModel)]="hasta" name="hasta">
      </div>
    </div>
  </div>

  <!-- Botones -->
  <div class="filtros-botones">
     <button class="btn-fitrank btn-secondary" (click)="filtrar()">Filtrar</button>
    <button class="btn-reset btn-secondary" (click)="resetFiltros()">Resetear Filtros</button>
  </div>
</div>


  <div class="ranking-list">
    <p *ngIf="mensaje">{{ mensaje }}</p>

    <div
      *ngFor="let socio of ranking; let i = index"
      class="card-ranking"
    >
      <div class="posicion">
        {{ getMedalla(i) || (i + 1) + '.' }}
      </div>
      <div class="datos">
        <span class="nombre">{{ socio.nombreCompleto }}</span>
        <span class="puntaje">{{ socio.puntajeTotal | number:'1.0-0' }} pts</span>
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <div class="cargando">
    <i class="fas fa-spinner fa-spin"></i> Cargando ranking...
  </div>
</ng-template>
