<div class="container">
  <!-- Header -->
  <div class="header">
    <button class="back-btn">‚Üê</button>
    <h1 class="header-title">Ranking</h1>
  </div>

  <!-- Tabs -->
  <div class="tabs-container">
    <div class="tabs">
      <div class="tab active">Global</div>
      <!-- Si quieres m√°s tabs (ej. "Por Grupo"), agrega aqu√≠ y l√≥gica en componente -->
    </div>
  </div>

  <!-- Category Pills (din√°mico para grupos musculares) -->
  <div class="categories">
    <div class="category-pills">
      <!-- ‚úÖ Bot√≥n "Todos" para limpiar filtro -->
      <button class="category-pill"
              [class.active]="!grupoSeleccionado()"
              (click)="seleccionarGrupo(null)">
        Todos
      </button>

      <!-- ‚úÖ *ngFor en gruposMusculares (number[]), muestra nombre con mapper, pasa ID number al click -->
      <button *ngFor="let grupoId of gruposMusculares"
              class="category-pill"
              [class.active]="grupoSeleccionado() === grupoId"
              (click)="seleccionarGrupo(grupoId)">
        {{ getGrupoName(grupoId) }}  <!-- Muestra "Pecho" en lugar de 0 -->
      </button>
    </div>
  </div>

  <!-- Rankings Section -->
  <div class="rankings-section">

    <!-- Ranking General (usa rankings: MostrarRankingDTO[]) -->
    <div *ngIf="rankings.length > 0; else noGeneral">
      <h2 class="ranking-title">Ranking General</h2>
      <div class="ranking-list">
        <div class="ranking-item" *ngFor="let user of rankings; let i = index">
          <!-- Avatar -->
          <div class="avatar-placeholder">
            {{ getUserInitial(user.username) }}  <!-- Usa el m√©todo del servicio si lo importas, o inline: user.username.charAt(0).toUpperCase() -->
          </div>

          <!-- User Info -->
          <div class="user-info">
            <div class="user-name">{{ i + 1 }}. {{ user.username }}</div>
            <div class="user-stats">
              Puntos: <strong>{{ user.Totalpuntos }}</strong> ‚Ä¢  <!-- PascalCase del servicio -->
              Nivel: <strong>{{ user.Nivel }}</strong>  <!-- PascalCase -->
            </div>
          </div>

          <!-- Action Button -->
          <button class="action-btn">‚ö°</button>
        </div>
      </div>
    </div>

    <ng-template #noGeneral>
      <div class="empty-state">
        <p>No hay datos de ranking general.</p>
      </div>
    </ng-template>

    <!-- Ranking por Grupo Muscular (usa filtrarPorGrupo(): MostrarRankingDTOGrupo[]) -->
    <div *ngIf="filtrarPorGrupo().length > 0; else noGrupo">
      <!-- ‚úÖ T√≠tulo din√°mico: Muestra nombre del grupo con mapper (ej. "Ranking Gl√∫teo") -->
      <h2 class="ranking-title">
        Ranking {{ getGrupoName(grupoSeleccionado() || 0) || 'por grupo muscular' }}
      </h2>
      <div class="ranking-list">
        <div class="ranking-item" *ngFor="let user of filtrarPorGrupo(); let i = index">
          <!-- Avatar -->
          <div class="avatar-placeholder">
            {{ getUserInitial(user.username) }}  <!-- Inline o del servicio -->
          </div>

          <!-- User Info -->
          <div class="user-info">
            <div class="user-name">{{ i + 1 }}. {{ user.username }}</div>
            <div class="user-stats">
              <!-- ‚úÖ GrupoMuscular como number ‚Üí Muestra nombre con mapper (ej. "Pecho") -->
              {{ getGrupoName(user.GrupoMuscular) }} ‚Ä¢ {{ user.Nombre }}<br>
              Puntos: <strong>{{ user.Totalpuntos }}</strong> ‚Ä¢  <!-- PascalCase -->
              Nivel: <strong>{{ user.Nivel }}</strong>  <!-- PascalCase -->
            </div>
          </div>

          <!-- Action Button -->
          <button class="action-btn">‚ö°</button>
        </div>
      </div>
    </div>

    <ng-template #noGrupo>
      <div class="empty-state">
        <p>No hay datos de ranking por grupo muscular.</p>
      </div>
    </ng-template>

  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <a href="#" class="nav-item">
      <div class="nav-icon">‚åÇ</div>
      <div>Inicio</div>
    </a>
    <a href="#" class="nav-item active">
      <div class="nav-icon">‚≠ê</div>
      <div>Ranking</div>
    </a>
    <a href="#" class="nav-item">
      <div class="nav-icon">üî•</div>
      <div>Actividad</div>
    </a>
    <a routerLink="/EjercicioRealizado" routerLinkActive="active" class="nav-item" [routerLinkActiveOptions]="{exact: true}">
      <div class="nav-icon">üßç</div>
      <div>Registrar</div>
    </a>
  </div>
</div>
