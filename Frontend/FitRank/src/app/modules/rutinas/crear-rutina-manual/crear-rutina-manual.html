<div class="crear-rutina-container">
  <h2>Crear Rutina Manual</h2>

  <form [formGroup]="rutinaForm" (ngSubmit)="onSubmit()">
    <!-- Datos de la rutina -->
    <div>
      <label>Nombre:</label>
      <input formControlName="nombre" type="text" />
    </div>

    <div>
      <label>Fecha inicio:</label>
      <input formControlName="fechaInicio" type="date" />
    </div>

    <div>
      <label>Fecha fin:</label>
      <input formControlName="fechaFin" type="date" />
    </div>

    <div>
      <label>DÃ­as por semana:</label>
      <input formControlName="diasPorSemana" type="number" min="1" max="7" />
    </div>

    <hr />

    <!-- Filtro por grupo muscular -->
<div class="filtro-grupo-muscular">
  <label>Filtrar por grupo muscular:</label>
  <img
    *ngFor="let g of gruposMusculares"
    [src]="grupoMuscularFiltroImagenMap[g.id]"
    [class.selected]="grupoSeleccionado === g.id"
    (click)="filtrarPorGrupo(g.id)"
    [alt]="g.nombre"
    class="filtro-img"
  />
</div>


    <hr />

    <!-- Listado de ejercicios disponibles -->
    <div class="ejercicios-cards-container">
      <label>Seleccionar ejercicios:</label>
      <div class="cards-grid">
        <div
          *ngFor="let e of ejerciciosFiltrados"
          class="ejercicio-card"
          [class.selected]="ejerciciosSeleccionados.includes(e)"
          (click)="seleccionarEjercicio(e)"
        >
          <img [src]="e.imagen" alt="{{ e.nombre }}" class="ejercicio-img" />
          <h4>{{ e.nombre }}</h4>
          <p>Dificultad: {{ e.dificultad }}</p>
        </div>
      </div>

      <div class="agregar-ejercicios-btn">
  <button
    type="button"
    (click)="agregarEjerciciosSeleccionados()"
    [disabled]="ejerciciosSeleccionados.length === 0"
  >
    Agregar ejercicios seleccionados
  </button>
</div>

    </div>

    <hr />

    <!-- Ejercicios seleccionados en el formArray -->
   <div formArrayName="ejercicios">
  <div
    *ngFor="let ejercicio of ejerciciosFormGroups; let i = index"
    [formGroup]="ejercicio"
    class="ejercicio-item"
  >
    <div class="ejercicio-item-container">
      <!-- Imagen a la izquierda -->
      <img [src]="ejercicio.value.imagen" alt="{{ ejercicio.value.nombre }}" class="ejercicio-item-img" />

      <!-- Contenido a la derecha -->
      <div class="ejercicio-item-content">
        <h4>Ejercicio {{ i + 1 }}: {{ ejercicio.value.nombre }}</h4>
        <div class="form-row">
          <div class="form-group">
            <label>Series (recomendadas)</label>
            <input type="number" formControlName="series" />
          </div>
          <div class="form-group">
            <label>Repeticiones (recomendadas)</label>
            <input type="number" formControlName="repeticiones" />
          </div>
          <div class="form-group">
            <button type="button" (click)="eliminarEjercicio(i)">Eliminar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


    <hr />
    <button type="submit">Crear rutina</button>
  </form>
</div>
